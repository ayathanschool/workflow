ğŸ” DEBUGGING: IT LAB "UNKNOWN ACTION" ISSUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… DEPLOYMENT IS WORKING (Verified via terminal)
âœ… generateITLabDrafts endpoint responds correctly
âœ… ping endpoint works fine

â“ BUT FRONTEND STILL SHOWS "Unknown action"

STEP-BY-STEP DEBUGGING PROCEDURE:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ğŸŒ CLEAR BROWSER CACHE
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   - Press: Ctrl + Shift + Delete
   - Clear: "Cached images and files"
   - Time range: "All time"
   - Click: "Clear data"

2. ğŸ”„ HARD REFRESH PAGE
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   - Go to: http://localhost:5173/
   - Press: Ctrl + F5 (force refresh)
   - Or: Ctrl + Shift + R

3. ğŸ” CHECK BROWSER CONSOLE
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   - Press: F12 (open dev tools)
   - Click: "Console" tab
   - Look for errors (red text)
   - Share any error messages you see

4. ğŸŒ VERIFY CORRECT URL
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Open browser dev tools (F12) â†’ Network tab
   - Login as HM user
   - Go to: "IT Lab Substitutions"
   - Click: "Generate Drafts"
   - Look for POST request in Network tab
   - Check if URL is: https://script.google.com/macros/s/AKfycbxb3eCcrPwNyzeaYZJBFPyxESd2xWnnhjt2Q_XmnH-UXGneJyGHvxCrFMCow_iNGjGp/exec

5. ğŸ“ CHECK REQUEST PAYLOAD
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   In Network tab, click on the POST request:
   - Check "Request Headers" 
   - Check "Request Payload"
   - Should show: {"action": "generateITLabDrafts", "date": "..."}

6. ğŸ“¥ CHECK RESPONSE
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   In same POST request:
   - Check "Response" tab
   - Should show: {"success": true, "message": "Generated X drafts", ...}
   - If shows: {"error": "Unknown action"} â†’ Problem found!

POSSIBLE CAUSES & SOLUTIONS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ CAUSE 1: Browser cache
   SOLUTION: Clear cache + hard refresh

ğŸ”´ CAUSE 2: Wrong deployment URL
   SOLUTION: Verify URL in .env matches deployed URL

ğŸ”´ CAUSE 3: Multiple deployments confusion
   SOLUTION: Check Apps Script "Manage deployments" - ensure correct one is active

ğŸ”´ CAUSE 4: Dev server using old .env
   SOLUTION: Restart dev server (already done)

ğŸ”´ CAUSE 5: Frontend code issue
   SOLUTION: Check console errors

VERIFICATION COMMANDS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend should call this URL:
https://script.google.com/macros/s/AKfycbxb3eCcrPwNyzeaYZJBFPyxESd2xWnnhjt2Q_XmnH-UXGneJyGHvxCrFMCow_iNGjGp/exec

This command works in terminal:
$body = '{"action": "generateITLabDrafts", "date": "2025-10-27"}'
Invoke-RestMethod -Uri "https://script.google.com/macros/s/AKfycbxb3eCcrPwNyzeaYZJBFPyxESd2xWnnhjt2Q_XmnH-UXGneJyGHvxCrFMCow_iNGjGp/exec" -Method POST -Body $body -ContentType "text/plain"

RETURNS: {"success": true, "message": "Generated 0 drafts, skipped 6", ...}

NEXT STEPS:
â•â•â•â•â•â•â•â•â•â•â•
1. Follow debugging steps 1-6 above
2. Report what you find in step 6 (Response content)
3. Share any console errors from step 3

The deployment is working - we need to find why frontend doesn't see it.