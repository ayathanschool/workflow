🔍 DEBUGGING: IT LAB "UNKNOWN ACTION" ISSUE
════════════════════════════════════════════════

✅ DEPLOYMENT IS WORKING (Verified via terminal)
✅ generateITLabDrafts endpoint responds correctly
✅ ping endpoint works fine

❓ BUT FRONTEND STILL SHOWS "Unknown action"

STEP-BY-STEP DEBUGGING PROCEDURE:
═══════════════════════════════════

1. 🌐 CLEAR BROWSER CACHE
   ────────────────────────
   - Press: Ctrl + Shift + Delete
   - Clear: "Cached images and files"
   - Time range: "All time"
   - Click: "Clear data"

2. 🔄 HARD REFRESH PAGE
   ──────────────────────
   - Go to: http://localhost:5173/
   - Press: Ctrl + F5 (force refresh)
   - Or: Ctrl + Shift + R

3. 🔍 CHECK BROWSER CONSOLE
   ─────────────────────────
   - Press: F12 (open dev tools)
   - Click: "Console" tab
   - Look for errors (red text)
   - Share any error messages you see

4. 🌐 VERIFY CORRECT URL
   ────────────────────────
   Open browser dev tools (F12) → Network tab
   - Login as HM user
   - Go to: "IT Lab Substitutions"
   - Click: "Generate Drafts"
   - Look for POST request in Network tab
   - Check if URL is: https://script.google.com/macros/s/AKfycbxb3eCcrPwNyzeaYZJBFPyxESd2xWnnhjt2Q_XmnH-UXGneJyGHvxCrFMCow_iNGjGp/exec

5. 📝 CHECK REQUEST PAYLOAD
   ─────────────────────────
   In Network tab, click on the POST request:
   - Check "Request Headers" 
   - Check "Request Payload"
   - Should show: {"action": "generateITLabDrafts", "date": "..."}

6. 📥 CHECK RESPONSE
   ─────────────────────
   In same POST request:
   - Check "Response" tab
   - Should show: {"success": true, "message": "Generated X drafts", ...}
   - If shows: {"error": "Unknown action"} → Problem found!

POSSIBLE CAUSES & SOLUTIONS:
═══════════════════════════

🔴 CAUSE 1: Browser cache
   SOLUTION: Clear cache + hard refresh

🔴 CAUSE 2: Wrong deployment URL
   SOLUTION: Verify URL in .env matches deployed URL

🔴 CAUSE 3: Multiple deployments confusion
   SOLUTION: Check Apps Script "Manage deployments" - ensure correct one is active

🔴 CAUSE 4: Dev server using old .env
   SOLUTION: Restart dev server (already done)

🔴 CAUSE 5: Frontend code issue
   SOLUTION: Check console errors

VERIFICATION COMMANDS:
═════════════════════

Frontend should call this URL:
https://script.google.com/macros/s/AKfycbxb3eCcrPwNyzeaYZJBFPyxESd2xWnnhjt2Q_XmnH-UXGneJyGHvxCrFMCow_iNGjGp/exec

This command works in terminal:
$body = '{"action": "generateITLabDrafts", "date": "2025-10-27"}'
Invoke-RestMethod -Uri "https://script.google.com/macros/s/AKfycbxb3eCcrPwNyzeaYZJBFPyxESd2xWnnhjt2Q_XmnH-UXGneJyGHvxCrFMCow_iNGjGp/exec" -Method POST -Body $body -ContentType "text/plain"

RETURNS: {"success": true, "message": "Generated 0 drafts, skipped 6", ...}

NEXT STEPS:
═══════════
1. Follow debugging steps 1-6 above
2. Report what you find in step 6 (Response content)
3. Share any console errors from step 3

The deployment is working - we need to find why frontend doesn't see it.